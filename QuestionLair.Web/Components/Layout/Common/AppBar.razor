@inject IAuthService Auth
@inject NavigationManager Navigation

<MudAppBar Color="Color.Primary">
    <MudText Typo="Typo.h6">QuestionLair</MudText>
    <MudSpacer />
    <MudSwitch T="bool" @bind-Value="IsDarkMode" Color="Color.Secondary" OnChanged="ToggleDarkMode" />
    <MudIconButton OnClick="Logout" Icon="@Icons.Material.Filled.Logout" />
</MudAppBar>

@code {
    [Parameter]
    public bool IsDarkMode { get; set; }

    [Parameter]
    public EventCallback<bool> IsDarkModeChanged { get; set; }

    private async Task ToggleDarkMode(bool value)
    {
        IsDarkMode = value;
        await IsDarkModeChanged.InvokeAsync(value);
    }
    private async Task Logout()
    {
        await Auth.LogoutAsync();
        Navigation.NavigateTo("/login");
    }
}
